---

- hosts: all

  vars:

    #################
    # Manala - Sudo #
    #################

    manala_sudo_sudoers_exclusive: true
    manala_sudo_sudoers:
      - file: app
        config:
          - app: 'ALL=NOPASSWD:ALL'

    ##################
    # Manala - Users #
    ##################

    manala_users_groups:
      - app

    manala_users:
      - name:     root
        password: $1$hVMBHhKk$4zC4YK.KRk3Vy9fmLd7681 # Null password generated by "mkpasswd -s -m md5"
      - name:     app
        password: $1$hVMBHhKk$4zC4YK.KRk3Vy9fmLd7681 # Null password generated by "mkpasswd -s -m md5"
        group:    app
        groups:   ['sudo']
        authorized_keys:
          - "{{ lookup('url', 'https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub') }}"

    ####################
    # Manala - Locales #
    ####################

    manala_locales:
      - name:  en_US.UTF-8
        state: absent

    manala_locales_default: C.UTF-8

    ###########################
    # Manala - Ansible Galaxy #
    ###########################

    manala_ansible_galaxy_roles:
      - manala.ansible-galaxy
      - manala.apt
      - manala.skeleton

  roles:
    - role: manala.sudo
    - role: manala.users
    - role: manala.locales
    - role: manala.ansible-galaxy
